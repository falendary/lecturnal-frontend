{"version":3,"sources":["editor-features/components/b-component/b.component-old.ts"],"names":[],"mappings":"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","file":"b.component-old.js","sourcesContent":["import {Component,EventEmitter} from '@angular/core';\nimport {Input, Output} from '@angular/core';\nimport {IEditorButton} from '../interfaces/IEditorButton';\nimport {SelectionHelper} from '../../helpers/selection.helper';\nimport {SelectionData} from '../../models/selectionData';\nimport {NodeHelper} from '../../helpers/node.helper';\n\n@Component({\n    selector: 'b-editor-button',\n    template: 'b.component.html'\n})\n\nexport class BComponent implements IEditorButton {\n\n    @Output('contenteditableModelChange') update = new EventEmitter();\n\n    @Input('content')\n    public content: string;\n\n    @Input('editorId')\n    public editorId: string;\n\n    wrapSelected(): void {\n\n        let selection = window.getSelection();\n        let node: any = selection.focusNode;\n        let selectionData: SelectionData = SelectionHelper.getSelectionData();\n\n        if (document.getElementById(this.editorId).contains(node)) {\n\n            console.log({parentNode: node.parentNode});\n            console.log({node: node});\n\n            if (NodeHelper.haveParentWithLocalName(node, 'b')) {\n\n                let parent = NodeHelper.findParentByLocalName(node, 'b');\n                parent.outerHTML = parent.innerHTML;\n\n            } else {\n\n                let blockParent = NodeHelper.findBlockParent(node);\n\n                if (blockParent.childNodes.length > 1) {\n\n                    let currentLength = 0;\n                    let nodesToWrap: any[] = []; // Node or Element\n\n                    let startNodeIndex: number;\n                    let endNodeIndex: number;\n\n                    for (let i: number = 0; i < blockParent.childNodes.length; i = i + 1) {\n\n                        currentLength = currentLength + blockParent.childNodes[i].textContent.length;\n\n                        if (currentLength >= selectionData.offsetFrom) {\n\n                            if (!startNodeIndex) {\n                                startNodeIndex = i;\n                            }\n\n                            let lengthDiff: number = currentLength - selectionData.offsetTo;\n\n                            if (lengthDiff < blockParent.childNodes[i].textContent.length) {\n                                nodesToWrap.push(blockParent.childNodes[i]);\n                                //blockParent.removeChild(blockParent.childNodes[i]);\n                                endNodeIndex = i;\n                            }\n\n                        }\n\n                    }\n\n                    console.log('nodesToWrap', nodesToWrap);\n\n                    let b: Element = document.createElement('B');\n\n\n                    for (let i: number = 0; i < nodesToWrap.length; i = i + 1) {\n                        b.appendChild(nodesToWrap[i]);\n                    }\n\n                    console.log('B ELEMENT', b);\n\n                    //blockParent.insertBefore(b, blockParent.children[startNodeIndex + 1]); // next to start\n\n\n                } else {\n\n                    blockParent.innerHTML = selectionData.startString + '<b>' + selectionData.middleString + '</b>' + selectionData.endString;\n                }\n            }\n\n\n            this.update.emit()\n        }\n\n\n    }\n\n}"]}